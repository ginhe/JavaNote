## 基本计算器 II

[leetcode227](https://leetcode-cn.com/problems/basic-calculator-ii/)

**题目：**实现一个基本的计算器来计算一个简单的字符串表达式的值。

字符串表达式仅包含非负整数，+， - ，*，/ 四种运算符和空格  。 整数除法仅保留整数部分。

**示例 1:**

```
输入: "3+2*2"
输出: 7
```


**示例 2:**

```
输入: " 3/2 "
输出: 1
```


**示例 3:**

```
输入: " 3+5 / 2 "
输出: 5
```


**说明：**

你可以假设所给定的表达式都是有效的。
请不要使用内置的库函数 eval。



**题解：**用一个栈存储当前的数字，变量lastOp存储上次遇到的计算符号，初始为+号：

- 每当遇到一个数字字符，转成数字。
- 遇到一个计算符号ch，则判断上次遇到的计算符号lastOp类型：
  - 加号：将前面凑成的数字放入栈里
  - 减号：将前面凑成数字变成负数放入栈里
  - 乘号：从栈里弹出数字，与前面凑成的数字做乘法，得到的结果放入栈里
  - 除法：从栈里弹出数字作为被除数，前面凑成的数字作为除数做除法，得到的结果放入栈里
  - 然后将ch作为lastOp。



```java
	public int calculate(String s) {
        Stack<Integer> numStack = new Stack<>();
        char lastOp = '+';  //将结尾的数字放入栈里
        int  lastNum = 0, tmp;
        s += "+";
        for(int i = 0; i < s.length(); i++) {
            char ch = s.charAt(i);
            if(ch == ' ')  continue;
            if((ch >= '0' && ch <= '9')) {
                lastNum = 10 * lastNum + (ch - '0');
            }else {
                switch(lastOp) {
                    case '+' :
                        numStack.push(lastNum);
                        break;
                    case '-' :
                        numStack.push(-lastNum);
                        break;   
                    case '*' :
                        tmp = numStack.pop();
                        numStack.push(tmp * lastNum);
                        break;
                    case '/' :
                        tmp = numStack.pop();
                        numStack.push(tmp / lastNum);
                        break;        
                }
                lastNum = 0;
                lastOp = ch;
            }
        }
        int ans = 0;
        while(!numStack.isEmpty()) {
            ans += numStack.pop();
        }
        return ans;
    }
```

